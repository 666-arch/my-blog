---
author: Huang Chao
pubDatetime: 2023-11-10T15:58:53Z
modDatetime: 2023-12-06T13:05:56.066Z
title: "let å’Œ const å‘½ä»¤"
featured: false
tags:
  - javascript
description: ES6ä¸­ let å’Œ const å‘½ä»¤.
---

## åŸºæœ¬ç”¨æ³•

ES6æ–°å¢äº†letå‘½ä»¤ï¼Œç”¨æ¥å£°æ˜å­˜å‚¨å˜é‡ã€‚ä½œç”¨ç±»ä¼¼äºvarï¼Œä½†æ˜¯letåªåœ¨ä»£ç çœ‹å†…èµ·æ•ˆ.

```javascript
{
  let a = 10;
  var b = 5;
}
console.log("b", b);
console.log("a", a); //ç›´æ¥æŠ¥é”™
```

![es6_1_let_const](../../assets/images/es6/es6_1_let_const.jpeg)

æ‰€ä»¥ `let` åœ¨ `for` å¾ªç¯ä¸­ç»“åˆä½¿ç”¨å°±å¾ˆé€‚åˆ

```javascript
for (let index = 0; index < 10; index++) {}
console.log("index", index);
```

![for_i](../../assets/images/es6/for_i.jpeg)

å¦‚æœä½¿ç”¨ `var` ä¼šå‡ºç°çš„æƒ…å†µ

```javascript
var a = [];
for (var i = 0; i < 10; i++) {
  a[i] = function () {
    console.log(i);
  };
}
a[6](); // 10
```

ğŸ’¡ï¼šä¸Šé¢ä»£ç ä¸­ï¼Œè®¾ç½®å¾ªç¯å˜é‡å’Œå¾ªç¯ä½“å†…çš„å˜é‡iéƒ½æ˜¯æŒ‡å‘å…¨å±€çš„ï¼Œå¯¼è‡´è·å–çš„å§‹ç»ˆæ˜¯æœ€ç»ˆçš„é‚£ä¸€æ¬¡ç»“æœ

æ¢æˆ `let`

```javascript
var a = [];
for (let i = 0; i < 10; i++) {
  a[i] = function () {
    console.log(i);
  };
}
a[6](); // 6
```

ğŸ’¡ï¼šä¸Šé¢é€šè¿‡letå£°æ˜çš„iï¼Œæ­¤æ—¶çš„iåªåœ¨å½“å‰å¾ªç¯çš„è¿™ä¸€è½®ä¸­å­˜åœ¨ä½œç”¨ï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯å‡ºæ¥çš„iå€¼éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å€¼èµ‹äºˆ `a[i]`

### forå¾ªç¯ç‰¹åˆ«ä¹‹å¤„

```javascript
for (let index = 0; index < 3; index++) {
  let index = 1;
  console.log("index", index);
}
// 1
// 1
// 1
```

ğŸ’¡ï¼šè¿™æ˜¯å› ä¸ºforå¾ªç¯åœ¨è®¾ç½®å¾ªç¯å˜é‡ `index` é‚£ä¸€åˆ»å°±æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œå¾ªç¯ä½“å†…æ˜¯å•ç‹¬çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥æ¯æ¬¡å¾ªç¯è¾“å‡ºçš„éƒ½æ˜¯åŒæ ·çš„ç»“æœ 1

## `var` ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´æ˜¯ä¸€ä¸ª `bug`

è§£å†³æ‰å˜é‡æç¤ºçš„æƒ…å†µ

```javascript
// var
console.log(foo); // è¾“å‡ºundefined
var foo = 2;

// let
console.log(bar);
let bar = 2;
```

![let_error](../../assets/images/es6/let_error.jpeg)
ğŸ’¡ï¼šåŸå› å°±æ˜¯è„šæœ¬æ‰§è¡Œæ—¶ï¼Œfooå·²ç»è¢«æå‡åˆ°æœ€å‰é¢ `var foo` ,ä½†æ­¤æ—¶æœªèµ‹å€¼ï¼Œæ‰€ä»¥è¾“å‡º `undefined` ï¼Œ`let` ç›´æ¥é€šè¿‡æŠ¥é”™é¿å…æ‰å‡ºç°è¿™ä¸ªé—®é¢˜ï¼Œç®€å•ç›´æ¥

## æš‚æ—¶æ€§æ­»åŒº-TDZ

åªè¦åœ¨å½“å‰å—çº§ä½œç”¨åŸŸå†…å­˜åœ¨ `let` å®šä¹‰çš„å˜é‡ï¼Œå°±ä¸ä¼šè¢«å¤–ç•Œå¹²æ‰°ï¼Œå£°æ˜çš„å˜é‡å°±æ­¤ç»‘å®šè¿™ä¸ªåŒºåŸŸ

```javascript
var foo = "abc";
if (true) {
  foo = "bcd";
  let foo;
}
```

![tdz_error](../../assets/images/es6/tdz_error.jpeg)

ğŸ’¡ï¼šå˜é‡ `foo` åœ¨ `if` è¿™ä¸ªä½œç”¨åŸŸå†…è¢«ç»‘å®šï¼Œåœ¨è¢« `let` å®šä¹‰å‰æ‰§è¡Œï¼Œå°±ä¼šç›´æ¥æŠ¥é”™ã€‚ES6 æ˜ç¡®è§„å®šï¼Œå¦‚æœåŒºå—ä¸­å­˜åœ¨letå’Œconstå‘½ä»¤ï¼Œè¿™ä¸ªåŒºå—å¯¹è¿™äº›å‘½ä»¤å£°æ˜çš„å˜é‡ï¼Œä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸ

```js
if (true) {
  // TDZå¼€å§‹
  tmp = "abc"; // ReferenceError
  console.log(tmp); // ReferenceError

  let tmp; // TDZç»“æŸ
  console.log(tmp); // undefined

  tmp = 123;
  console.log(tmp); // 123
}
```

## ä¸å…è®¸é‡å¤å£°æ˜

```javascript
function func(arg) {
  let arg;
}
func(); // error

function func(arg) {
  {
    let arg;
  }
}
func(); // success
```

## ES6å—çº§ä½œç”¨åŸŸ

```js
function foo() {
  let a = 5;
  if (true) {
    let a = 10;
  }
  console.log(a); // 5
}
```

ğŸ’¡ï¼šä¸Šé¢ä»£ç è¡¨ç¤ºå¤–å±‚ä½œç”¨åŸŸå†…çš„å˜é‡ä¸å—å†…å±‚ä½œç”¨åŸŸå†…å˜é‡å½±å“ï¼Œè¿™é‡Œç›¸å½“äºæœ‰ä¸¤ä¸ªä½œç”¨åŸŸï¼Œåˆ†åˆ«æ˜¯å‡½æ•°å±‚ä½œç”¨ `if` å—å±‚çš„ä½œç”¨åŸŸ

## const

`const` å£°æ˜ä¸€ä¸ªåªè¯»çš„å¸¸é‡ã€‚ä¸€æ—¦å£°æ˜ï¼Œå¸¸é‡çš„å€¼å°±ä¸èƒ½æ”¹å˜ã€‚

```js
const PI = 3.1415;
PI; // 3.1415

PI = 3;
// TypeError: Assignment to constant variable.
```

### æœ¬è´¨

`const` å®é™…ä¸Šä¿è¯çš„ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸å¾—æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€æ‰€ä¿å­˜çš„æ•°æ®ä¸å¾—æ”¹åŠ¨ã€‚å¯¹äºç®€å•ç±»å‹çš„æ•°æ®ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ï¼‰ï¼Œå€¼å°±ä¿å­˜åœ¨å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ï¼Œå› æ­¤ç­‰åŒäºå¸¸é‡

```js
const foo = {};

// ä¸º foo æ·»åŠ ä¸€ä¸ªå±æ€§ï¼Œå¯ä»¥æˆåŠŸ
foo.prop = 123;
foo.prop; // 123

// å°† foo æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼Œå°±ä¼šæŠ¥é”™
foo = {}; // TypeError: "foo" is read-only
```

ğŸ’¡ï¼šä¸Šé¢ä»£ç  `const` åªèƒ½ä¿è¯è¿™ä¸ªæŒ‡é’ˆæ˜¯å›ºå®šçš„ï¼ˆå³æ€»æ˜¯æŒ‡å‘å¦ä¸€ä¸ªå›ºå®šçš„åœ°å€ï¼‰ï¼Œè‡³äºå®ƒæŒ‡å‘çš„æ•°æ®ç»“æ„æ˜¯ä¸æ˜¯å¯å˜çš„ï¼Œå°±å®Œå…¨ä¸èƒ½æ§åˆ¶äº†ã€‚å› æ­¤ï¼Œå°†ä¸€ä¸ªå¯¹è±¡å£°æ˜ä¸ºå¸¸é‡å¿…é¡»éå¸¸å°å¿ƒã€‚

åŒæ ·

```js
const a = [];
a.push('Hello'); âœ…
a.length = 0;    âœ…
a = ['world'];   âŒ
```
