---
author: Huang Chao
pubDatetime: 2023-03-23T11:18:53Z
modDatetime: 2023-03-24T01:22:56.066Z
title: "å…³äºŽ JS é‚£äº›äº‹"
featured: true
draft: false
tags:
  - echarts
description: "JSç¢Žç‰‡åŒ–"
---

## æœ‰å…³ null å’Œ undefined çš„åŒºåˆ«

- nullè¡¨ç¤º ä¸€ä¸ªç©ºæŒ‡é’ˆï¼Œå®ƒä¸æŒ‡å‘ä»»ä½•å¯¹è±¡ï¼Œæ˜¯æˆ‘ä»¬ä¸»åŠ¨èµ‹äºˆå˜é‡çš„ä¸€ä¸ªå€¼
- undefined åˆ™è¡¨ç¤ºä½ å£°æ˜Žäº†ä¸€ä¸ªå˜é‡ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰èµ‹å€¼æ“ä½œï¼Œæˆ–è€…è¯´å‡½æ•°æ²¡æœ‰è¿”å›žå€¼çš„æ“ä½œï¼Œéƒ½ä¼šå‡ºçŽ°undefinedçš„æƒ…å†µ

## è°ˆè°ˆé—­åŒ…

### é—­åŒ…çŽ¯å¢ƒå‡ºçŽ°çš„æ¡ä»¶

```js
function x() {
  let count = 0;
  function y() {
    return (count += 1);
  }
  return y;
}
let fun = x();
console.log("count", fun()); // 1
console.log("count", fun()); // 2
```

å®ƒæ˜¯ç”±å¤šä¸ªå‡½æ•°åµŒå¥—å¼•ç”¨ï¼Œå¹¶ä¸”å¤šä¸ªå‡½æ•°ä½œç”¨åŸŸå†…é’ˆå¯¹æŸä¸ªå¤–éƒ¨å˜é‡è¿›è¡Œå†…éƒ¨å¼•ç”¨ï¼Œå¹¶ä¸”åªè¦è¿™ä¸ªå‡½æ•°ä¸é”€æ¯çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé—­åŒ…ä¸­çš„å˜é‡å°†ä¼šä¸€ç›´å­˜åœ¨

### é—­åŒ…çš„åº”ç”¨

- å‡½æ•°æŸ¯é‡ŒåŒ–
- å®žçŽ°å‡½æ•°æ¨¡å—åŒ–
  - `count` æ˜¯ä¸€ä¸ªåˆ›å»ºäºŽ `fun` å‡½æ•°ä½œç”¨åŸŸå†…çš„å˜é‡
  - é€šè¿‡åœ¨å†…éƒ¨å¤„ç† `count` çš„è¯»å–å’Œè®¾ç½®ï¼Œå¤–éƒ¨æ— æ³•ç›´æŽ¥è°ƒç”¨åˆ° count
  - é€šè¿‡æš´éœ²å…¬å…±æ–¹æ³•åŽ»ä¾›å¤–éƒ¨è¯»å–

```js
function fun() {
  let count = 0;
  return {
    get() {
      return count; // ç§æœ‰å˜é‡ï¼Œå¤–éƒ¨æ— æ³•è®¿é—®
    },
    set() {
      count += 1;
    },
  };
}
let newFun = fun();
newFun.set();
console.log("result", newFun.get());
```

### æ³¨æ„äº‹é¡¹

> å¦‚æžœé—­åŒ…é•¿æœŸå­˜åœ¨ï¼Œä¼šå®¹æ˜“å¯¼è‡´å†…å­˜æ³„éœ²ï¼Œå¤–éƒ¨å˜é‡ä¼šè¢«æ°¸è¿œæºå¸¦ï¼Œå¯ä»¥é€šè¿‡èµ‹å€¼ null çš„æ–¹å¼ é‡Šæ”¾é—­åŒ…

## JS ä¸­çš„å¼‚æ­¥ç¼–ç¨‹

> JS æœ¬èº«æ˜¯å•çº¿ç¨‹æ‰§è¡Œçš„ï¼Œç›¸å½“äºŽæ¯æ¬¡æ‰§è¡Œä¸€ä¸ª `task` éƒ½æ˜¯ä¸€ä¸ªä¸ªæ‰§è¡Œï¼Œä¸ºäº†å¤„ç†å¼‚æ­¥æ“ä½œï¼ŒJS å¼•å…¥äº†äº‹ä»¶å¾ªçŽ¯ï¼ˆevent loopï¼‰

### å…³äºŽäº‹ä»¶å¾ªçŽ¯ event loop

äº‹ä»¶å¾ªçŽ¯æ˜¯ä¸æ–­çš„ä»Žæ–°çš„ä»»åŠ¡ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œã€‚å¹¶ä¸”ä»»åŠ¡é˜Ÿåˆ—åˆ†ä¸ºå®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—

> å¾®ä»»åŠ¡é˜Ÿåˆ—ä¼˜å…ˆçº§é«˜äºŽå®ä»»åŠ¡é˜Ÿåˆ—

åœºæ™¯è®¾å®šðŸ”

æƒ³è±¡ä½ è¿›å…¥ä¸€ä¸ªå¿«é¤åº—ï¼ˆæµè§ˆå™¨ï¼‰ï¼Œé‡Œé¢åªæœ‰ä¸€ä¸ªåŽ¨å¸ˆï¼ˆJSä¸»çº¿ç¨‹ï¼‰ï¼Œä½†æ˜¯é¡¾å®¢ï¼ˆtaskï¼‰å´å¾ˆå¤šã€‚è¿™ä¸ªæ—¶å€™ JS å¼•å…¥äº†ä¸€å¥—é«˜æ•ˆçš„æŽ’é˜Ÿç³»ç»Ÿ

1. åŒæ­¥ä»»åŠ¡

ä»»åŠ¡ä¸€ä¸ªä¸€ä¸ªæ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªæ‰§è¡Œä¸‹ä¸€ä¸ª

```js
console.log("ç‚¹æ±‰å ¡");
console.log("ç‚¹è–¯æ¡");
```

2. å¼‚æ­¥ä»»åŠ¡

å®ä»»åŠ¡ï¼š

å¼€è®¾ä¸€ä¸ªæ–°çš„çª—å£ï¼ˆå¤–å–çª—å£ï¼‰é€šè¿‡ `WebAPI` è¿›è¡Œè®¡æ—¶

```js
setTimeout(() => {
  console.log("å¤–å–");
}, 0);
```

- åŽ¨å¸ˆè¿˜æ˜¯ä¼šä¼˜å…ˆå¤„ç†åŒæ­¥ä»»åŠ¡
- åŒæ­¥ä»»åŠ¡å…¨éƒ¨å¤„ç†å®Œæˆï¼Œå¤„ç†å¤–å–ä»»åŠ¡
- å¤–å–ä»»åŠ¡å®Œæˆï¼Œæ·»åŠ åˆ°å¤–å–é˜Ÿåˆ—

å¾®ä»»åŠ¡ï¼š

å¼€è®¾ä¸€ä¸ªè®¢å•åŠ æ€¥çª—å£ï¼Œå¤„ç†åŠ æ€¥è®¢å•ï¼ˆä»»åŠ¡ï¼‰

```js
Promise.resolve().then(() => {
  console.log("åŠ æ€¥è®¢å•");
});
```

- æŠŠå®Œæˆçš„è®¢å•ï¼ˆä»»åŠ¡ï¼‰æ”¾è¿›åŠ æ€¥è®¢å•ä¸­
- å½“åŽ¨å¸ˆæŠŠæ‰‹å¤´ä»»åŠ¡ï¼ˆåŒæ­¥ï¼‰å…¨éƒ¨å®Œæˆï¼Œå†å¤„ç†åŠ æ€¥è®¢å•ï¼Œå“ªæ€•å¤–å–çª—å£æœ‰å…¶ä»–è®¢å•ç­‰å¾…ï¼

æ‰§è¡Œæµç¨‹ï¼š

- åŽ¨å¸ˆä¼šä¼˜å…ˆå¤„ç†åŒæ­¥ä»»åŠ¡ä¸­çš„æ‰€æœ‰ä»»åŠ¡
- æ£€æŸ¥å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰æ–°çš„ä»»åŠ¡ï¼Œç­‰åŒæ­¥å¤„ç†å®Œä¼˜å…ˆå¤„ç†
- æ£€æŸ¥å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰æ–°çš„ä»»åŠ¡ï¼Œå¦‚æžœæœ‰ï¼Œåªå¤„ç†ä¸€ä¸ª
- å¾ªçŽ¯å¾€å¤ï¼Œç›´åˆ°é˜Ÿåˆ—ä»»åŠ¡å…¨éƒ¨æ¸…ç©º

## Promise

## JS å¦‚ä½•æž„é€ ä¸€ä¸ªä¸€ç™¾ä¸ªå…¨ä¸º 0 çš„æ•°ç»„

- é€šè¿‡ Array.fill
  > ç”¨äºŽå¡«å……ä¸€ä¸ªå›ºå®šå€¼åˆ°æ•°ç»„ä¸­ï¼Œä»Žèµ·å§‹ç´¢å¼•åˆ°ç»ˆæ­¢ç´¢å¼•

```js
new Array(100).fill(0);
```
